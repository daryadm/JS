<html>
  <head>
    <title>iRock - The Virtual Pet Rock</title>

    <script type="text/javascript" src="cookie.js"></script>
    <script type="text/javascript">
      var userName;

      function resizeRock(){
          clientWindowWidth = document.body.clientWidth;
          rockImageWidth = (clientWindowWidth - 100) * 0.3;
          document.getElementById("rockImg").style.width = rockImageWidth;
      }



      function greetUser() {
          if (navigator.cookieEnabled) {
              userName = readCookie("irock_username");
              if (userName)
                  alert("Hello " + userName + " , I missed you");
              else
                  alert("Hello, I am your pet rock.");
          } else {
              alert("Your browser doesn't support cookies. Sorry, I will not remember your name.")
          }

      }

      function touchRock() {
        if (userName) {
          alert("I like the attention, " + userName + ". Thank you.");
        }
        else {
          userName = prompt("What is your name?");
          if (userName)
            alert("It is good to meet you, " + userName + ".");
            if (navigator.cookieEnabled) {
                writeCookie("irock_username", userName, 5 * 365);
            } else {
                alert("Your browser doesn't support cookies. Sorry, I will not remember your name.")
            }
        }
        document.getElementById("rockImg").src = "rock_happy.png";
        setTimeout("document.getElementById('rockImg').src = 'rock.png';", 5 * 60 * 1000);
      }
    </script>
  </head>

  <body onload="greetUser(); resizeRock();" onresize="resizeRock();">
    <div style="margin-top:100px; text-align:center">
      <img id="rockImg" src="rock.png" alt="iRock" style="cursor:pointer" onclick="touchRock();" />
    </div>
  </body>
</html>
